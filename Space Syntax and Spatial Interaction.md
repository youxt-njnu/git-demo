Space Syntax and Spatial Interaction: Comparisons, Integrations, Applications

## abstract

“In this paper we attempt, somewhat optimistically perhaps, to compare space syntax with spatial interaction. At one level, these two approaches to urban spatial structure are non-comparable. Space syntax is largely a descriptive technique for visualising spatial relations at the level of connections between places while spatial interaction is a predictive model that forecasts how much travel there will be between places. Space syntax articulates the system in terms of whether or not a physical link, usually at the level of the street system, exists while spatial interaction predicts movement between all origins and destinations which are places usually anchored in terms of the street network, but which at the level of prediction assume connections between all places. Space syntax tends to be grounded at a fine spatial scale while spatial interaction defines places as aggregates of activity in much larger zones than the scale of the street system. The main output of space syntax is a connectivity matrix of step lengths between streets whereas in spatial interaction, such networks are predetermined, measurable in terms of Euclidean distance or generalised cost of travel, while the output is the volume of travel prior to this being assigned to the relevant modal network. However both approaches define accessibility, in space syntax in terms of streets while in spatial interaction in terms of places or zones.  

在本文中，我们尝试比较**空间句法和空间交互**。在一个层面上，这两种城市空间结构的方法是不可比的。<span style="background-color: rgba(162, 138, 229, 0.5)">空间句法在很大程度上是一种描述性技术，用于在地点之间的连接级别上可视化空间关系</span>，<span style="background-color: rgba(255, 102, 102, 0.5)">而空间交互是一种预测模型，用于预测地点之间的旅行量</span>。<span style="background-color: rgba(162, 138, 229, 0.5)">空间句法根据是否存在物理链接（通常在街道系统级别）来阐明系统</span>，<span style="background-color: rgba(255, 102, 102, 0.5)">而空间交互预测所有起点和终点之间的移动，这些起点和终点通常是根据街道网络锚定的地方，但在预测水平假设所有地方之间都有联系</span>。<span style="background-color: rgba(162, 138, 229, 0.5)">空间句法倾向于以精细的空间尺度为基础</span>，<span style="background-color: rgba(255, 102, 102, 0.5)">而空间交互将场所定义为比街道系统规模大得多的区域中的活动聚合</span>。<span style="background-color: rgba(162, 138, 229, 0.5)">空间句法的主要输出是街道之间步长的连接矩阵</span>，<span style="background-color: rgba(255, 102, 102, 0.5)">而在空间交互中，这种网络是预先确定的，可以根据欧几里德距离或广义旅行成本来衡量，而输出是分配之前的旅行量到相关的模式网络</span>。然而，这两种方法<span style="background-color: rgba(95, 178, 54, 0.5)">都定义了可达性，在空间句法方面根据街道，而在空间交互方面根据地点或区域</span>。” ([Batty, p. 1](zotero://select/library/items/FYG26WBF)) ([pdf](zotero://open-pdf/library/items/UYJKVNAG?page=2))

“There is however a fundamental way of relating the implicit network graph of spatial interaction to the explicit planar type graph of the street network by assuming the planar graph of the network is conceived of as a primal problem of spatial interaction while the dual graph linking streets in the planar graph is the graph which is used in space syntax. We exploit this duality and show how we can move easily between spatial interaction and space syntax from primal to dual and back again. This is grounded in a more fundamental graph which is the bipartite graph or list of streets/arcs and their intersections/nodes from which the primal and dual emerge naturally. We explore various distance and accessibility measures and show how they relate and correlate. We then go one step further and consider how various processes of random walking take place in these networks and look at the steady states of the primal and dual problems in terms of the likelihood of a random walker visiting any node or street. We define primal and dual Markov chains that enable us to generate these probabilities although there is some controversy as to whether higher values are associated with more important nodes. Nevertheless, this provides a basic framework for comparing primal and dual in comparing spatial interaction with space syntax. We illustrate these measures on simple and easy to articulate graphs and then extend this to a synthetic network of nearest neighbour links in Greater London based on some 699 nodes and 1972 symmetric street or routes/links between zones. We also speculate how we might begin to compare the predictions from related spatial interaction models with the street accessibility values from space syntax and in doing so, suggest that that there are ways forward in comparing outputs at the level of movement on links, notwithstanding that these two approaches exist at different level. This paper is a preliminary attack on the problem of linking these two approaches which remains problematic.  

然而，有一种基本方法<span style="background-color: rgba(95, 178, 54, 0.5)">将空间交互的隐式网络图与街道网络的显式平面类型图联系起来</span>，假设网络的平面图被认为是空间交互的一个基本问题，而连接街道的对偶图在平面图是用于空间句法的图。我们<span style="background-color: rgba(95, 178, 54, 0.5)">利用这种二元性并展示我们如何在空间交互和空间句法之间轻松移动，从原始到对偶再返回</span>。这是基于一个更基本的图，即二分图或街道/弧线及其交叉点/节点的列表，原始和对偶自然从中出现。<span style="background-color: rgba(95, 178, 54, 0.5)">我们探索各种距离和可达性措施，并展示它们如何关联和关联。然后我们更进一步，考虑随机游走的各种过程是如何在这些网络中发生的，并根据随机游走者访问任何节点或街道的可能性来观察原始问题和对偶问题的稳态</span>。我们定义了使我们能够生成这些概率的原始马尔可夫链和双马尔可夫链，尽管对于更高的值是否与更重要的节点相关联存在一些争议。然而，这为比较空间交互与空间句法的原始和对偶提供了一个基本框架。<span style="background-color: rgba(95, 178, 54, 0.5)">我们在简单易懂的图表上说明这些措施，然后将其扩展到大伦敦的最近邻链接合成网络，该网络基于大约 699 个节点和 1972 个对称街道或区域之间的路线/链接</span>。我们还推测我们可能如何开始将来自<span style="background-color: rgba(95, 178, 54, 0.5)">相关空间交互模型的预测与来自空间句法的街道可访问性值进行比较，并且在这样做的过程中，建议在比较链接移动水平的输出方面有前进的方向</span>，尽管这些两种方法存在于不同的层面。本文是对将这两种方法联系起来仍然存在问题的问题的初步攻击。” ([Batty, p. 1](zotero://select/library/items/FYG26WBF)) ([pdf](zotero://open-pdf/library/items/UYJKVNAG?page=2))

## 序言：问题背景

<span style="background-color: rgba(162, 138, 229, 0.5)">空间句法是一种描述性技术，用于计算一组空间（通常定义为街道）彼此之间的相对可达性或接近度，目的是比较它们与每个空间或街道相关的运动的相对接近度</span>。假设是移动随可达性线性增加。<span style="background-color: rgba(255, 212, 0, 0.5)">可访问性通常称为集成。它的定义是首先确定一组街道，这些街道通常是畅通无阻的运动线，有时称为轴线，然后观察任何一条街道是否与任何另一条街道相连，这定义了两条街道是否相连</span>（Hillier，1996 ）。<span style="background-color: rgba(255, 212, 0, 0.5)">街道之间的链接集形成了一个交互矩阵，可以将其视为拓扑图或二元图，在该图上可以进行各种操作</span>，例如，找到从任何链接到任何其他链接的最短路径，然后用于定义相对重要性或一个链接到任何其他链接的可访问性。当为每个特定链接汇总这些可访问性时，这给出了链接的相对可访问性。<span style="background-color: rgba(162, 138, 229, 0.5)">空间句法的一个特点是它适用于街道之间的二进制 (0-1) 链接，欧几里得距离或成本不是分析的一个特征</span>。<span style="background-color: rgba(162, 138, 229, 0.5)">该模型仅在每条街道的可达性值与每条街道中观察到的运动相关联时才具有预测性，这偶尔用于构建预测模型</span>。

另一方面，<span style="background-color: rgba(255, 102, 102, 0.5)">空间交互模型直接预测一组位置之间的运动，这些位置有时可以解释为街道之间的交叉点，但通常更通用——定义位置或区域的质心——并适用于不同的空间尺度</span>。交互或移动与位于不同位置的活动成正比，与街道长度的某种度量成反比，街道长度的度量是一些包含物理距离、旅行成本和/或旅行时间的通用度量。因此，该模型将运动预测为这些自变量的函数。<span style="background-color: rgba(255, 102, 102, 0.5)">可以得出与模型预测一致的可访问性度量，但这些度量与位置有关，而不是街道或这些位置之间的链接</span>。这些模型以这样一种方式进行参数化，即估计运动尽可能接近观察到的数据流。

<span style="background-color: rgba(95, 178, 54, 0.5)">空间句法和空间交互之间有几个关键区别。</span>空间句法本质上是街道可达性的描述性度量，它以比较而非预测的方式与运动相关。它没有参数化，因此没有用于操作模型的估计或校准程序。该技术中没有任何东西可以像空间交互模型那样产生运动。<span style="background-color: rgba(162, 138, 229, 0.5)">空间句法不处理位置，而是处理位置之间的链接——街道——而这些链接又被定义为线性空间。这些空间之间的链接也不是用距离来表示，而是用定义拓扑网络的逻辑链接来表示。并且空间句法不包含与位置相关的任何活动度量</span>。然而，<span style="background-color: rgba(255, 102, 102, 0.5)">空间交互模型中的自变量是不同位置（旅行）活动的度量、位置之间的广义距离以及定义这些活动和距离的相对权重的参数</span>。<span style="background-color: rgba(162, 138, 229, 0.5)">基于空间之间的逻辑链接并从中形成可访问性，空间句法更加简洁。它唯一的独立变量是链接的定义拓扑，在某些情况下，它已扩展到其他几何属性，例如街道方向（角度变化）</span>。这些可能是参数化（加权）的，但如果有的话，在这个方向上的例子很少。模型建立后，可访问性与运动进行比较；<span style="background-color: rgba(162, 138, 229, 0.5)">如果存在强线性关系，则偶尔会使用该模型来预测运动，通常是在将新街道连接作为设计的一部分添加的情况下</span>。

<span style="background-color: rgba(95, 178, 54, 0.5)">两种模型之间的关键链接与位置之间的底层网络有关</span>。这两种技术都是从物理网络开始的。<span style="background-color: rgba(255, 102, 102, 0.5)">空间交互模型直接从这个和其他位置数据预测流量</span>。<span style="background-color: rgba(162, 138, 229, 0.5)">空间句法从该网络中计算出可访问性，然后将这些与真实数据进行比较，如果相关性良好，则可以拟合线性模型并用于预测。</span>共同的关键是网络，但相似性结束。<span style="background-color: rgba(255, 102, 102, 0.5)">在空间交互中，网络被定义为线段（节点和弧）之间的交互集合，通过一些广义距离或成本来衡量。网络不会以任何特定方式赋予节点或弧线特权，因为这是发生空间交互的假定背景</span>。<span style="background-color: rgba(162, 138, 229, 0.5)">在空间句法中，从同一个网络开始，但从这些网络中，具有自身完整性的段集被定义为链接序列。这些形成“街道”，通常由多个部分组成。</span>一旦定义了这些街道，空间句法将街道之间的连接定义为原始网络中是否存在节点，该节点的是否存在则定义街道是否连接。从某种意义上说，这是原始网络的对偶，我们可能将其视为原始网络，但由于街道可以由多个段构成，因此不必是严格的对偶。然而，<span style="background-color: rgba(95, 178, 54, 0.5)">在某种意义上，我们将空间句法网络称为对偶，原始街道段网络称为原始的，这是两种方法之间的区别所包含的关键区别</span>。事实上，<span style="background-color: rgba(46, 168, 229, 0.5)">在空间句法中使用对偶句法还是原始句法对可访问性的最终计算并没有太大的影响</span>（参见 Batty，2013 年的详细解释和比较），但我们在这里的主要目的并不是关注这些经验概念上的差异。<span style="background-color: rgba(95, 178, 54, 0.5)">我们的任务是看看这两个模型有多接近，以及如何将一个模型与另一个模型联系起来</span>。

接下来，我们将从空间句法和空间交互的共同关键——网络开始。我们将首先开发网络的通用表示，从中可以定义空间句法和空间交互变体。从本质上讲，我们调用了<span style="background-color: rgba(95, 178, 54, 0.5)">pre-graph</span>的概念——一个将**交叉点intersections/节点nodes/交叉点junctions或区域质心**链接到作为某种形式的路线（例如街道）的**线段segments/链接links或弧arc**的**二分图**。从这个二分图可以推导出所有其他内容，但重要的是要注意，这些工具和模型是一组有限的可能形式，可以定义为图，以及可以测量其链接的方式。可以定义基于与底层通用网络关联的位置的其他概念和变量，这些概念和变量与空间句法没有直接关系（Marshall，2015）。

## 网络的一般表示

空间句法和空间交互中的网络通常嵌入在由街道或路线段相交的位置定义的二维空间中。通常，这些网络是平面图，尽管如果表示延伸到第三维，包括单向运动或相互交叉而不相交的段，这可能会很复杂。<span style="background-color: rgba(95, 178, 54, 0.5)">在这种情况下，我们将专门处理二维空间中的网络，其中使用欧几里德几何测量距离并且图形是平面的</span>（Barthélemy，2011）这两种方法之间的基本共同点本质上是位置和运动路径的结构网络：它是一个图，其元素是未加权的二元链接link。这两个模型没有其他共同点，<span style="background-color: rgba(162, 138, 229, 0.5)">空间句法仅使用此图从模型中得出任何类型的预测和洞察力</span>。<span style="background-color: rgba(255, 102, 102, 0.5)">空间交互将此图作为骨架网络，使用欧几里德距离或沿其段的成本对其进行加载或加权</span>，如果图不完整，则计算出最短路线以产生完整的距离或旅行成本矩阵，然后继续将其用作其中之一预测位置之间流量的模型的基本输入。简而言之，空间句法与空间交互非常不同，并且可能认为尝试比较它们没有什么意义，因为它们的基本交互网络并不相同。<span style="background-color: rgba(95, 178, 54, 0.5)">但正如我们将看到的，进行两者的比较是有趣的，因为这两个模型都处理位置和运动，因此值得尝试看看空间交互的思想如何影响空间句法，反之亦然</span>。为了给这个问题提供必要的直觉，让我们提出一个街道系统的假设平面图，其中节点是街道的线（弧线或线段）之间的交点。在图 1 (a) 中，我们展示了这样一个街道网络，它由 5 = N 个交叉口和 8 = L 个街道组成。该网络高度简化：它是对称的，也就是图 G(N,L)是无向的，没有自环。我们没有为该图中的链接指定任何权重，因此它仅与系统的拓扑有关。

![image-20221206141309294](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206141309294.png)

很明显，图 1(a) 的平面图通过 5 个交叉口将 8 条街道连接起来，这些交叉口用黑圈编号，实线代表街道段。在图 1(b) 中，街道由黑色方块编号，如果两条街道通过公共交叉口连接，则绘制一条实线。**在原始问题中，每条街道与其他街道相交的路口不超过两个，而在对偶问题中，每条街道只能与另一条街道相交一次**。<span style="background-color: rgba(162, 138, 229, 0.5)">正是这一点在空间句法中可以放宽，其中单个街道段可以与几个不同的街道段相交，这会改变交叉口的性质</span>。<span style="background-color: rgba(95, 178, 54, 0.5)">事实上，在本文中，可以说我们定义的图（不允许街道有超过 2 个交叉口）遗漏了城市结构的一些关键要素；但无论如何它是对空间句法的一般批评，因为它的起点是始终是局部或最近邻接边link的平面图</span>。如果平面图有 N 个节点，则总是有许多小于$N^2$的邻接边link，即$L<<N^2$ 。

我们需要的是一种从同一基础构建原始网络图和对偶网络图的方法，为此，我们从平面图和与街道列表关联（或不关联）的节点列表开始。因此，<span style="background-color: rgba(95, 178, 54, 0.5)">这两种技术的起点都是 N 个节点之间链接的骨架网络</span> ，我们将每个节点定义为 N=1,2,3,…,N，以及定义为L 条线（段或弧）为j=1,2,3,…,L。用二元矩阵A=${A_{ij}}$来表示的节点和边，其中 $A_{ij}=1$ 表示节点i和弧段j连接，$A{ij} = 0$  表示节点 i 和弧段j之间不存在连接。从这个矩阵中，我们可以定义空间交互和空间句法中使用的两个基本矩阵。首先，我们称之为**原始primal**的骨架空间交互矩阵，将节点之间的链接link计算为(1)

$U_{ik}=\sum_j A_{ij}A^{T}_{jk}$

其中T表示矩阵转置，空间句法矩阵是操作的**对偶图dual**，并定义为(2)

$V_{jl}=\sum_j A_{jk}^{T}A_{kl}$

用矩阵表示等式把(1)(2)写成$U=AA^T$和 $V=A^TA$

为了说明这些操作的原始primal和对偶dual的含义，我们最好介绍一个简单的工作示例，在该示例中，<span style="background-color: rgba(95, 178, 54, 0.5)">我们预计空间交互矩阵是每条线连接两个且只有两个节点的矩阵，即只有两个表示每条线的开始和结束的节点，而空间句法矩阵（与这个空间交互问题相关）是相反的——对偶的——现在每条线都被视为一个节点</span>，并且从两个这样的节点中，只有一个线。为了推导出一般的空间句法问题，我们需要放宽这个要求，但是<span style="background-color: rgba(95, 178, 54, 0.5)">为了产生最清晰的例子，我们将采用这种简化，并且这种方式不失一般性</span>。现在矩阵 A 可以图形化地显示为二分图（Borgatti 和 Everett，1997 年），我们将节点链接到线——街道交叉口到街道。我们在图 1(a) 中使用的示例有 N=5节点和 L=8 的线，其矩阵和二分图定义为

![image-20221206141338428](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206141338428.png)

【1表示节点1到边1的路径数】

请注意，我们将 5 个节点定义为 1、2、...、5，将 8 条边定义为 1,2、...、8，与上述定义没有任何歧义。正如我们一直在努力指出的那样，该矩阵仅记录了哪个街道节点或街道交叉口与哪条街道线相关联。我们正在研究的两个空间模型获取这些信息并以一致但不同的方式处理它。<span style="background-color: rgba(255, 102, 102, 0.5)">空间交互模型通过定义交叉点之间的交互矩阵来工作，这些交叉点被假定为区域位置周围的质心，并使用该矩阵来预测移动量。然后从方程（1）使用上面的二分图，我们形成交互矩阵 U 为</span>

![image-20221206141353293](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206141353293.png)

【3表示节点1经过边到节点1的路径数】

这是primal问题。对偶dual涉及定义每条街道线如何连接到任何其他街道，从而在街道线而不是街道节点之间形成交互矩阵 V，这定义了相关图。然后从等式（2）我们得到

![image-20221206141407349](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206141407349.png)

<span style="background-color: rgba(95, 178, 54, 0.5)">如果我们将矩阵 U 和 V 与图 1 中的左右矩阵进行比较，那么我们可以很容易地看到它们是相同的，只是每个矩阵的主对角线元素都等于 0。事实上，主对角线元素反映了图中从一个节点到同一个节点的路径数。</span>在上面 U 的定义中，您可以看到从节点 1 到其自身有 3 个路径，从两个二分图和矩阵 A 和$A_T$的并列显示出来。对于 V ，通过两条线从节点 1 到节点 1 有 2 个步骤，依此类推。

最后一步仍然是获取用于两个模型的骨架配置矩阵，为此，我们需要切出具有多个路径的任何链接link并摆脱自链接self-link。那么定义原始问题primal和对偶dual问题的两个矩阵可以形成如下(3)：

$$
X_{ik}=\begin{cases}
1,\ if\ U_{ik}\geq 1,i\neq k \\
0,\ if\ U_{ik}\ge 0, i\neq k
\end{cases} \\
Y_{jl}=\begin{cases}
1,\ if\ V_{jl}\geq 1,j\neq l \\
0,\ if\ V_{jl}\ge 0, j\neq l
\end{cases}
$$


很明显，如果完成了这些操作，矩阵 U 和 V 将被切分以去除路径长度并确保矩阵保持二进制，从而得到矩阵 X 和 Y。这些与图 1 中的相同，我们在此重复

![image-20221206142912637](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206142912637.png)

## 距离：使用空间句法和空间交互来解释运动的关键因素

矩阵 U 和 V 给出了它们各自节点之间的一步的路径数，X 和 Y 显示了不包括自环的一步路径。在空间交互或空间句法问题中，在任意两个节点之间形成距离的最简单方法是使用一种众所周知的技术，该技术涉及从这些矩阵的幂中计算这些。由于这些操作对于任何方阵都是相同的，因此我们将仅针对其中之一（U 矩阵）进行说明，并简单说明其他矩阵的相关结果。那么任意两个节点之间的两步路径的数量由幂矩阵 $U(1)=U$ 中的一步路径的数量给出，即(4)

$U(2)=U(1)U=U^2$

通过迭代，得到n步路径长度下的数量为(5)

$U(n)=U(n-1)U=U^n$

其他的结果类似，可以陈述为(6)

$U(l)==V^l; X(n)==X^n; Y(l)==Y^l$

这些方程给出了有和没有原始自环的路径长度的数量，尽管我们可能推测路径长度的数量与**节点或街道的可达性或中心性**共同变化，但我们仍然需要利用这些长度来对可达性进行相应测量。事实上，要生成所有正的路径长度，我们需要将矩阵的幂提高到 N 或 L 以确保我们得到所有这些。

<span style="background-color: rgba(255, 212, 0, 0.5)">我们可以从这些路径长度形成两种距离</span>。首先，我们认为我们希望找到任何一对节点的最短路径长度并将其用作距离的度量。为了实现这个，我们检查等式 (4) 的任何迭代中的路径长度数，如果在前一次迭代中的路径长度数为零而这次迭代中该数字不为零了，我们将距离设置为幂的值– 步长。那么对于U(7)

$if \ U_{ik}(n)>0 \ and \ U_{ik}(n-1)=0 \ then \ D^U_{ik}=n$

并且所有其他步长距离也同理得到$D^V,\ D^X, \ D^Y$这是一个相当直截了当的度量，因为它与二进制步长一致，但不包含实际的旅行时间或成本、抑或是我们稍后会注意到的欧几里德距离或旅行成本，但目前这可以是被视为我们对可访问性或集成的第一个度量，因为它有时在空间句法中使用。第二个度量是基于路径长度的加权和。让我们假设每个步长都有一组权重，我们称它们为$w^U_z$其中$w^U_1 >w^U_2>w^U_3>…$ .请注意，我们对这些进行排序，因此更近/更小的步长具有更大的权重，然后应用这些权重到每一步的路径数。因此，第二个距离度量是(8)

$\delta ^U_{ik}(n)=\sum_{z=1}^n w^U_{z}U_{ik}(z)$

其他的也可以相应定义为$\delta ^X_{ik}(n),\ \delta ^V_{jl}(l),\ \delta ^Y_{jl}(l)$

现在值得证明这两组距离测量对我们的假设示例实际显示了什么。最简单的距离度量是步距，其中任何两个节点之间的链接值是步行者在一个节点和任何其他节点之间（对于 X 是通过街道系统）以及任何街道和任何其他街道之间必须走的步数（对于Y是通过交叉节点）。对于我们的示例，这些矩阵很容易从等式 (7) 所暗示的算法中计算出来。那么这些步距是

![image-20221206142935041](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206142935041.png)

并且很容易确认这些不超过 2 步的简单路径长度是通过对图 1 中的图形进行随意检查而得出的。这些矩阵显然是可访问性的非常粗略的度量，但因为它们是非常简单的图形并且仅基于在二元关系上，这是可以预料的。路径计算的数量更加详细，并且随着我们在更大的图中采用越来越多的矩阵幂，这些实际上会爆炸，因为在更大的图中，路的数量呈指数增长。为了表明这一点，我们表示矩阵 $U(N=5)=U^5\ and\ for\ V(L=8)=V^8$。这些计算为

![image-20221206142948079](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206142948079.png)

组合路径数至总步数的权重$U(N=5)=U^5\ and\ for\ V(L=8)=V^8$是基于简单的权宜之计,即使权重相对总最大路径长度N或L考虑更少的step length，即$w^U_i\propto N-n+1\ or\ w^V_i\propto L-n+1$。因此，空间交互和空间句法变体的加权距离计算如下

![image-20221206143001576](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143001576.png)

我们终于可以对这些距离/路径数/步长与图 1 中所示的问题相关的问题发表一些看法了。<span style="background-color: rgba(95, 178, 54, 0.5)">很明显，节点的相对定位之间几乎没有区别</span>，节点包括了在原始图primal中作为交叉点的节点和在对偶图dual中作为街道的节点。<span style="background-color: rgba(95, 178, 54, 0.5)">也就是说，这些图是对称的并且是强连接的，如果我们要测量每个图中节点的相对重要性，那么它们的入度（和出度，因为图是对称的）不会显示出太大的变化</span>。在原始primal中，很明显中央节点 3 似乎最重要，而在对偶中，节点 1、4、6 和 7 形成了一个中央块，它比由节点 1、3、5 和 8 组成的外部块更重要.

<span style="background-color: rgba(255, 102, 102, 0.5)">空间交互模型通常预测沿街道发生的节点之间的相对流量以及发往每个起点和目的地（节点）的总流量</span>，而<span style="background-color: rgba(162, 138, 229, 0.5)">空间句法与需要从相对定位聚合的街道流量相关联</span>。简而言之，这两种模型都利用了作为交互总和的可访问性。在空间交互中，我们根据有关 $i\leftrightarrow k$ 节点的信息以及流入 i 和 k 的信息来预测流量，而在空间句法中，街道$j\leftrightarrow l$之间的流量没有意义，我们需要做的是对发生在每条街道j和l的概念流notional flow进行建模。因此，我们需要在这里关注的是可访问性。由于这些都以与节点的距离测量总和相同的方式定义，无论这些节点是十字路口还是街道，因此我们将仅针对步距 $D^U$和$D^V$说明这些。由于空间句法使用步距测量 $D^V$作为其工具箱中的核心元素，我们首先将街道 j 的总步距定义为$d^V_j$并通过最大步距 m 将其归一化为$\hat d_j^V$，以便进行比较具有不同街道数量的系统之间；这些措施是(9)

![image-20221206143026316](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143026316.png)

<span style="background-color: rgba(46, 168, 229, 0.5)">这些度量虽然被 Hillier 和 Hanson (1985) 称为集成度量，但实际上是“不可访问性”度量，并且在大多数空间句法应用中，该度量的倒数用于定义他们所谓的集成</span>。在最近的应用中，度量集成似乎已被放弃，而继 Hansen (1959) 之后的空间交互和交通建模中的传统用法之后，<span style="background-color: rgba(46, 168, 229, 0.5)">更常见的可达性度量正在被使用</span>。事实上，该度量通常被视为深度$d^V_j$和$\hat d_j^V$的倒数，并归一化为总和为 1，即（10）

![image-20221206143039822](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143039822.png)

这种度量有时被称为真正的相对不对称，尽管不清楚该术语的来源以及所指的不对称是什么（Bafna，2003）。在空间句法中发生的情况是，由于等式 (10) 中的该度量与街道系统相关联，因此为每条街道绘制了度量的相对变化（即任何街道相对于所有其他街道的平均或总深度），绘制中采用了红-黄-绿-蓝色带来产生典型的空间句法图。原始问题primal具有与位于街道交叉口的节点相关联的可访问性。以完全相同的方式，我们形成相同的可访问性，为了完整起见，我们将它们定义如下(11)

![image-20221206143055746](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143055746.png)

<span style="background-color: rgba(95, 178, 54, 0.5)">可达性显示了交叉口处流动的相对强度。如果需要在空间句法对偶中检查特定流，则需要使用实际距离测量来进行这些比较，但这在空间句法中尚未用于计算这些距离矩阵，很少有人提出这种空间交互所需的预测建模</span>。简而言之，虽然空间句法主要关注街道网络的几何和拓扑结构，但街道网络只是空间交互的起点，而可达性措施——实际上是空间交互建模的重要组成部分——与那些在空间句法中的用法有很大不同。在这一点上，我们有一个通用框架，可以计算原始和对偶中的接近度或可访问性的相对度量，<span style="background-color: rgba(95, 178, 54, 0.5)">在图 2 中，我们展示了如何映射这些以显示距离步长矩阵及其可访问性的强度变化</span>.在这一点上，我们不会在等式 (8) 中探索加权路径数距离，但请记住这些以供以后应用。

![image-20221206143116707](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143116707.png)

您可以看到原始（空间交互问题）和对偶（空间句法问题）之间的清晰关系，我们简单地将可访问性分别映射到原始图街道交叉点和对偶图街道段，展示在了图三的网络平面图中。必须注意，空间交互和空间句法之间存在内在的不对称性，因为我们使用位于空间交互网络基础的平面图来表示这两个问题。简而言之，在空间句法中，我们将运动折叠到定义街道的节点上，而在空间交互中，我们直接处理街道上的运动，我们将在下面详细说明。

![image-20221206143128017](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143128017.png)

## 用于模拟移动和位置的模型

<span style="background-color: rgba(95, 178, 54, 0.5)">原始网络图和对偶网络图上的操作不会导致运动预测，而是会导致定义可达性和距离指标的连通性度量。然后，这些指数可能会被视为变量，可以与地点的活动或地点之间的街道移动相关联或进行比较，但这是分析中的一个附加阶段</span>。例如，在**空间交互建模**中，距离是预测运动的核心，但这些通常是先验定义的，尽管诸如步距（或路径）矩阵$D^U,D^X$及其可访问性$d^U,d^X$之类的度量可以用作独立的可变输入，它们并不完全符合标准模型所需的形式。就距离矩阵$D^V,D^Y$及其可访问性$d^V,d^Y$而言，对于**对偶空间句法**问题，这些是唯一可用于预测运动的元素，在这种情况下，距离矩阵仅表示概念流或街道之间的相互作用，即$D^V_{jk}$本身并不具有实际交通流量的意义。只有当这些汇总到$d^V_j$时，我们才能将这些与相关街道段$i\leftrightarrow k$上的流量进行比较，以了解与真实数据的拟合程度。

<span style="background-color: rgba(95, 178, 54, 0.5)">然而，这样做有两个问题。首先使用步长，网络完全连接的步长范围可能非常窄。如果你看图 1(b)，对偶图，那么正如我们已经计算出来的，在对偶完全连接之前，只有两个步长——1、2；这对于计算可访问性来说太小了，即使节点数量增加后范围也会扩大。事实上，在链形式的大型网络中，可访问性的范围将随着节点的数量而变化。然而，在典型的网络中，无论人们所观察的城镇规模如何，充其量只是一小部分大型单中心集群，范围比我们预期的要窄得多，可以解释运动的变化</span>。这是空间句法中的一个主要问题，并且在以下事实中可以看出：当**对偶的可达性度量**与**沿街道段的移动**进行比较时，散点图的特征是：少量的可达性测量值均为整数值，而更多的移动测量值。这些图的出现其实并不是随机的散布，而是更有条理的条纹。

<span style="background-color: rgba(95, 178, 54, 0.5)">第二个问题是，假设一条街道是对偶中的一个节点的可达性，是从与其他街道的链接——对偶中的其他节点——派生的，这暗示着来自这些其他街道的某种流动</span>。简而言之，<span style="background-color: rgba(95, 178, 54, 0.5)">如果我们聚合对偶中的步距以获得街道的可达性为$d^V_j=\sum_l D^V_{jl}$，那么街道$D^V_{jl}$之间的交互实际上是流，这个结论并不清楚</span>。然而，在空间交互建模中，流量总是明确地与通过车辆客运、迁移、货运等衡量的运动相关联。<span style="background-color: rgba(95, 178, 54, 0.5)">第三个问题更普遍。在空间交互建模中，预测街道网络中所有交叉点或节点之间的流量，而在空间句法中，底层平面图并不直接与其他任何地方连接，因此只能在图中的直接链接上测量流量。</span>简而言之，在空间交互建模中，因为我们有直接链接，例如 ik 和 kz ，我们也有 iz ，它不一定作为平面街道图中的线段存在。简而言之，在空间句法中，我们只检查图中与节点 j 相关联的直接链接，因此许多可能的链接不会出现在图中，而空间交互建模中的隐式图是完全连接的。简而言之，在空间交互建模中，我们将行程分配到交叉口或节点之间的所有可能链接，而不管是否存在单独的物理链接，而在空间句法中，流量隐含地与作为交通度量的路段上的流量相关联。空间交互分布行程，而空间句法假设这些行程已经分配到基于直接街道段的物理网络。

<span style="background-color: rgba(95, 178, 54, 0.5)">事实上，在空间句法中所做的是构建模型，使用街道可达性将运动解释为图中直接街道段的函数。将观察到的街道运动定义为$T^{obs}_{ik}$，我们假设一个简单的回归</span>，例如

![image-20221206143151679](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143151679.png)

Hillier、Penn、Hanson、Grajewski 和 Xu (1993) 将这种关系称为支配“自然运动”的关系，<span style="background-color: rgba(95, 178, 54, 0.5)">他们的工作表明，与可达性进行比较的唯一流量是在每个链接上作为复合总量来衡量的流量。这些不会分解为街道图中所有节点之间的流，因此在将空间交互分配给网络链接之后隐式发生</span>。本文还揭示了上面提到的条纹问题，该问题涉及可访问性值是整数并且覆盖范围较窄的事实。<span style="background-color: rgba(95, 178, 54, 0.5)">与这些回归相关的解释方差水平很少超过 0.6，并且由于数据的性质以及通常少量不同的观察结果，这不会被视为令人满意的预测模型</span>。在我看来，空间句法的优势在于对空间如何形成以及空间如何根据通用人类交互进行塑造的更定性但结构化的讨论。在这种情况下，它起着重要的作用，但本质上正如我们在一开始所暗示的那样，它不是一个预测模型。

尽管有这个相当负面的后果，我们将在下面论证，由于实际上不可能采用标准的空间交互模型并从中推导出空间句法，反之亦然，通过改变空间交互和空间句法的表述仍然可能取得进展，并将它们转换为一种可以直接比较和推导另一种的形式。然而在此之前，<span style="background-color: rgba(95, 178, 54, 0.5)">我们需要引入空间交互作为预测模型，因为仍然可以使用原始度量来构建其预测能力。引入空间相互作用的许多变体之一的最清晰的方法是用条件概率术语</span>。然后

![image-20221206143217058](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143217058.png)

$T_{ik}$是从区域或交叉点i到k的流或者旅程，$E_i$ 是对位置或交叉点i的活动强度的测量，是作为在旅程交互中分布的流量，$p_{k|i}$ 是$E_i$ 作为到k的旅程的概率或分数。这个概率模型通常被构造为区域k，$F_k$ 的吸引子与我们假设的从i到k的广义距离/旅行费用$c_{ik}$的某种函数的乘积

![image-20221206143234888](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143234888.png)

自变量是$F_k$和$c_{ik}$并且模型是通过找到参数$\lambda$的值来校准的，它最小化了观察到的和预测的旅行之间的一些差异的统计量$g(T^{obs}_{ik}-T_{ik})$。就原始网络图的操作而言，那么很容易看出$c_{ik}$可能是之前推导出的度量之一，因此在这种形式中，定义了额外的变量，或者至少需要一个用于旅行或移动的驱动程序，例如$E_i$。这些模型有许多变体，这种形式的模型称为单约束或原点约束（Wilson，1970）。

事实上，我们可以使用等式（14）中对偶的可达性值，而不是距离值，如果我们放弃吸引子，那么空间交互模型的方程变为

![image-20221206143252103](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143252103.png)

这可以以相同的方式进行校准。这种通过广泛使用的集成度量（可访问性）将空间交互与空间句法耦合的方法显示了一种集成两个模型的方法，但由于该索引的模糊性，我们认为这是一种弱方法。本质上，空间交互更多地依赖于欧几里得距离，作为广义旅行成本的某种函数。尽管如此，我们是否要使用来自空间句法问题 V 或 Y 的路径数以及由这些路径形成的可访问性，重要于许多步长或仅基于某些高步长。这可能是遵循等式（15）的优选变体，我们可以将其写为

![image-20221206143306929](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143306929.png)

这更接近等式 (13) 和 (14) 中的模型，其中我们使用广义旅行成本，其中包含一些距离度量，但它仍然是一个非常弱的耦合，不太可能受到那些​​认为功能更强大的人的青睐需要使用威慑。在这个阶段，我们不可能做得比这更好，因为我们需要的是一种更强大的集成方法。我们已经有了这个的关键，因为它存在于矩阵为 A 的二分图的耦合中，它将节点与原始平面街道网络中的线分开。在这一点上，让我们推测前进的道路在于这种方法，我们需要做的是找到更好的距离测量方法，考虑到这种耦合，而不是基于步长的方法。我们将采用的方法已被作者 (Batty, 2013) 在多种情况下使用过，它包括稍微改变两个模型的性质，使它们以更基本的方式相交。<span style="background-color: rgba(95, 178, 54, 0.5)">在我们制作集成模型之前，我们将在下一节中提出这一点，最终在大伦敦的一个大型但简化的链接和区域网络上展示这一点。</span>

## 距离和连通性的概率解释

<span style="background-color: rgba(95, 178, 54, 0.5)">我们可以首先将原始交互矩阵 U 和 V 转换为随机矩阵，其中我们将单元分别解释为一个节点与另一个节点相关的概率和一条街道与另一条街道相关的概率</span>。然后我们将这些概率定义为

![image-20221206143320087](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143320087.png)

我们可以将这些解释如下。如果行人从一个节点i开始，然后以概率$P_{ik}$移动到节点k，那么同样的行人在下一步访问一个节点z的概率为$\sum_k P_{ik}P_{kz}$，它是矩阵的第二个幂的相应元素。然后在行走的第n步，我们可以计算概率为$P_{iz}(n)=\sum_k P_{ik}(n-1)P_{kz}$，以矩阵形式给出的是$P^n=P^{n-1}P$。**这个序列定义了一个离散的马尔可夫链,如果矩阵P是强连通的,它必须是对问题有意义的并且街道系统连通的,那么众所周知这个序列的极限是一个固定点向量,我们可以称之为p**。简言之,如果我们以概率向量p(1)开始行走,更新这个向量的序列可以写成$p(n)=p(n-1)P=p(1)P^{n-1}$。由于这个向量收敛到p，那么在极限中，我们可以从$p=pP$中求解p。

如果我们从街道j上以概率$Q_{jl}$访问另一条街道的步行者开始，则存在一个完全类似的过程。**在极限中，我们可以求解稳态概率向量$q=qQ$，这给出了如果步行无限期地持续下去，任何步行者访问街道的总体概率**。正如在所有的马尔科夫链中，概率的初始分布被洗掉了，这是我们不确定的，因为它意味着初始结构对最终状态的影响是递减的。<span style="background-color: rgba(95, 178, 54, 0.5)">在这种稳定状态下，一个步行者无论从哪里开始访问一个节点或街道，都有与其他任何人相同的机会。关键的问题是这些向量到底意味着什么。事实上，它们是系统中前往不同地点的步行者数量的度量；因此，这些可能与前面介绍的任何一种距离测度相关，我们将在下面的另一个工作示例中检验这种相关性。</span> 目前，**让我们简单地注意到，p和q是由与不同的概率过程P和Q相关的随机游走定义的交叉口和街道的可达性向量**。事实上，我们可以基于切片数据矩阵X和Y定义相关联的进程，但在这里我们不会这样做，因为这些进程接近于在原始交互数据上定义的进程。在我们深入了解这些过程之前的最后一点：显然，正如$U=A A^T$和$V=A^T A$，那么原始和对偶过程P和Q是相关的。我们可以把它们写成$P=\delta^p A A^T$和$Q=\delta^q A^T A$，其中$\delta^p$和$\delta^q$是定义的对角矩阵，以确保P和Q是行随机的。对这些关系的一些操纵表明，在初始矩阵A和$A^T$方面，它们的稳态向量之间有更明确的联系，但我们还没有进一步这样做。这里我们的目的是处理关系，我们在更基本的层次上定义概率。

为了介绍这些，我们可以根据基本数据矩阵 A 定义确定基础图上距离度量的概率结构。让我们将节点属于街道的概率定义为

![image-20221206143404224](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143404224.png)

现在这些矩阵是随机的，通过将它们串联起来形成原始概率和对偶概率，我们定义

![image-20221206143417557](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143417557.png)

这些矩阵有以下解释，它们是距离的进一步测量。矩阵$\hat P$记录了节点i的步行者通过任何街道j进入另一个节点k的概率，而矩阵$\hat Q$给出了从街道j通过任何节点k移动到另一条街道l的概率。详细来说，任何节点i的步行者都有进入每条街道j的概率，而从这些街道中的每一条，他/她都有到达另一个节点k的概率。在这个不断从节点到节点或从街道到街道的过程中，会产生相同类型的固定点向量，正如我们在上面指出的基于P和Q的过程。这就冲淡了最初的城市结构，只要我们能把稳定状态下的结果概率定义为可达性，这些概率就是从$\hat p= \hat p \hat P$和$\hat q=\hat q \hat Q$中定义的。

这些原始过程和对偶过程是通过原始过程整合空间交互和通过对偶过程整合空间句法的关键。让我们把相交节点的稳态方程写成$\hat p= \hat p \hat P = \hat p GC$。现在如果我们将其后乘以G，我们得到$\hat p G=\hat pGCG=\hat p G\hat Q$。现在，由于与$\hat Q$相关的稳态向量$\hat q$是唯一的，显然$\hat p G=\hat p G\hat Q=\hat q =\hat q \hat Q$。因此很明显$\hat q = \hat p G$，同样地$\hat p=\hat q C$。这是两个过程之间非常明确的关系，也是它们相互联系的最简单方式。它们的含义如下：将稳态关系完整地写为

![image-20221206143436436](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143436436.png)

如果你在一个节点k， 那么在那里的概率等于在与该节点相连的任何街道上的概率，而如果你在一条街道上，在那里的概率等于概率位于与该街道相关联的任何节点。

## 距离和概率测度的比较

我们现在可以比较所有这些方法，为此，我们将引入第二个更结构化的图表，以便我们能够对街道及其交叉点/节点的相对定位产生一些直觉。如图 4(a) 所示，很明显，节点 6 和 9 以及可能的节点 4 是最中心和连接的，而街道 6 和 9，然后是 7 和 8 似乎最容易到达，尽管这很难从配置中猜测得到。然而，这将在下面使用各种可访问性措施进行测试。<span style="background-color: rgba(95, 178, 54, 0.5)">现在有必要说明我们将从前面部分介绍的所有内容中计算出的距离度量。我们将列出这些，注意对于其中许多度量，由于交互矩阵是对称的，因此在为起点或目标节点或街道定义时，这些度量是相同的。</span>我们将在下面的同一行定义原始和对偶的度量，并根据它们的含义对它们进行注释：

![image-20221206143521311](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143521311.png)

![image-20221206143530166](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143530166.png)

我们将介绍最后一项测度方法。<span style="background-color: rgba(95, 178, 54, 0.5)">到目前为止，我们的度量都没有包含任何欧几里得距离的度量</span>。事实上，对于每个街道段 j，我们可以定义广义旅行成本$d_j$的距离度量。我们现在通过用$d_j$对每个节点—街道链接 ij 加权来扩充我们的原始数据矩阵，并且我们现在形成一个新的原始矩阵（并且它的转置直接由此而来）为$\overline A_{ij}=A_{ij} exp(-\lambda d_j)$。我们使用这些矩阵为矩阵 G 和 C 构造新值，并由此计算新的稳态，我们称之为$\overline p$和$\overline q$。这些构成了我们的第九个度量：

![image-20221206143542557](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143542557.png)

在这个公式中，我们现在有一个参数$\lambda $可以用来调节距离的影响。此外，对于任何极限概率，我们可以采用与所讨论矩阵的任何幂 z 相关的概率（对于度量 7-9），并将其用作参数；也就是说，**选择优化模型与数据的拟合的相关概率，但稍后当我们进行经验应用时会更多**。我们已经为图 4(a) 中的图表计算了所有这些度量，为了比较它们，我们将它们关联起来。因此，对于原始问题度量，我们在表 1(a) 中显示了这些相关性，在表 1(b) 中显示了对偶。

![image-20221206143558010](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143558010.png)

![image-20221206143609009](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143609009.png)

在这两个问题中，与所有 8 个其他测度最相关的测度实际上是基本矩阵 U 和 V 的入度。然而，我们从切片数据矩阵 X 和 Y 中选择了逆步长，并将它们的值绘制在图 4(b) 中。我们对节点相对重要性的初步直觉很明显，节点 6 占据关键位置，其次是 7 和 8，紧随其后的是 9。连接较少且较极端的节点（例如 1 和 10）是最不重要的。虽然这不是节点和街道之间相关性的明确证明，但空间句法测量表明街道 6 和 9 是最重要的，其次是 4、5、7 和 8。这些镜像也显示在图 4（b）中的节点结构。值得注意的是，最后的度量——基于$\overline p$和$\overline q$的第九个度量——是使用随机距离定义的，即$d_j=rand(100)$，与其他度量的最低相关性出现在这里也就不足为奇了。事实上，概率测度 7 和 8 的稳态与其他测度高度相关，但请注意，对于测度 7，这与原始和对偶的度数测度 1 完全相关，而测度 8 具有完全相关性与原始的切入度数。<span style="background-color: rgba(95, 178, 54, 0.5)">事实上，从中可以清楚地看出，如果我们有一个非常简单的结构，其中每个节点的入度数相同，那么概率度量很可能有一个非常与这些入度高度相关（Batty，2016）。在我们控制节点或限制 20 个连接的情况下，这可能是非常有问题的。这意味着我们通过连通性区分城市结构越少，之间的差异就越小在可访问性的度量中，这个问题在接下来的实证应用中非常重要</span>。

## 原始图和对偶图整合的一个实验性证明

正如我们所强调的，空间句法和空间交互表示不同尺度的空间，空间句法处理场所之间的表面的物理连接，而空间交互处理起点和目的地之间的一般运动，然后可以将其分配到比空间更精细的物理网络，其中可以构成空间句法的出发点。空间交互处理大小为$N^2$的起点和终点之间的所有流，而空间句法处理这些流的子集 $L<<N^2$，其中仅考虑网络物理链路上的流。然而，正如我们已经说明的那样，<span style="background-color: rgba(95, 178, 54, 0.5)">为了比较这两种方法，我们需要从一个公共网络开始，为此，我们从广义的旅行成本和组成大伦敦管理局(GLA)的大约 633 个区域之间的距离构建了一个物理链路网络区域。这些区域以选区为基础，这是与构成该地区的 33 个行政区相关的最基本的选区，这些区域平均包含 11,330 名常住人口和 7,181 个就业机会</span>。我们在图 5(a) 中显示了区域及其质心，其中我们在更广泛的区域环境中指示了 GLA 区域。

街道网络的详细程度远低于此尺度，因此在此应用程序中，我们要做的是从用于形成广义旅行成本矩阵的距离链接构建合成网络$[c_{ik}]$。为了构建这个网络，我们首先为每个区域 i 选取 5 个最短链接，如果这不会导致对称链接，即我们有最短链接$c_{ik}$但没有链接$c_{ki}$，我们添加这个链接到网络，从而为我们提供从每个起点到其最近邻目的地的至少 5 个链接。我们还需要确保在该区域的边缘，我们也采用 5 个这样的链接，因此我们在 GLA 区域之外的区域中有一个质心环，连接到该区域内的 633 个区域。这将区域的数量增加到 699 个，其中大约 66 个充当区域外的边缘区域。总的来说，我们从这 699 个区域中定义了 3944 个链接，平均入度（和出度）为 5.64，略大于最初为每个区域选择的 5 个。链接总数是所有可能链接的一小部分，比例小于 1%($0.008=3944/N^2=-3944/488,601$)这是一个非常稀疏的矩阵。<span style="background-color: rgba(95, 178, 54, 0.5)">这个网络是否足够丰富以获取伦敦的城市结构和连通性是有争议的，但至少所选择的链接确实存在于大部分相邻区域之间. 从这个意义上说，该网络可以称为“最近邻”网络，我们在图 5(b) 中展示了它的形式。</span>

从前面的假设示例中，切入度度量 1 和 2 与所有其他度量的相关性最高，就其直接可访问性而言我们认为这些是平面图的自然基线。此外，很明显，这些度量采用了local结构，尽管所有其他度量都基于间接和直接联系，其中一些具有适当的权重。我们展示了节点$x_i=\sum_k X_{ik}$和交点$y_j=\sum_l Y_{jl}$的切片入度，它们分别反映了图 6(a) 和 (b) 中的原始问题和对偶问题，很明显，这些度量反映网络是使用经验法则构建的，从 每个节点5个链接开始。这可能会为节点和路径提供更加合适的可访问性分布，实际上图 6 中就是这种情况。此外，在图 6(b) 中的街道可访问性中非常清楚地拾取了局部结构虽然节点中的可访问性由少数本地节点主导，但由于它们的物理并列，它们比其他节点更中心化。值得注意的是，基于 x 和 y 的入度结构等价于来自聚合稳态概率向量$\hat p= \hat p \hat P$和$\hat q=\hat q \hat Q$中的稳态向量。

![image-20221206143634249](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143634249.png)

![image-20221206143644540](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143644540.png)

![image-20221206143710118](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143710118.png)

空间句法中使用的最基本的度量是步长，在这里我们以逆形式计算原始和对偶问题的步长。我们将再次将这些度量定义为$\Delta^X_i =1 / \sum_k D^X_{ik}$ 和$\Delta ^Y_j = 1/ \sum _l D^Y_{jl}$，我们在图 7(a) 和 (b) 中显示它们的形式。<span style="background-color: rgba(95, 178, 54, 0.5)">这更直观地表示原始节点质心和对偶中的街道之间的接近度，并且节点与街道的视觉比较似乎证实了这些可访问性模式彼此接近。</span>然而，这些方式所揭示的是，首先存在着深刻的边缘效应，这可能是在我们建立网络到其边缘的方式下加剧的—也就是说，边缘节点只是在网络中才使他们能够满足每个非边缘节点有至少5链接到其他节点的要求。

![image-20221206143745616](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143745616.png)

其次，我们处理本质上是一个循环系统的事实意味着最容易接近的点朝向系统的中心。这是所有空间分析中的一个通用问题，它涉及到在某个时刻关闭系统对外界的基本问题。第三，在这样的网络中存在局部local与全局global连通性的问题，很明显，考虑到的链接越多，其最局部规模的结构受到的损害就越多。如果我们比较图 6 和图 7，那么我们可以看到局部结构如何演变为全局结构，因为可访问性的衡量标准是基于越来越广泛的链接效应。事实上，对于步长，跨越整个系统所需的矩阵幂的数量对于节点连通性约为 29，对于街道连通性约为 27。对于 699 x 699 和 1972 x 1972 矩阵，使用等式 (4) 到 (7) 所暗示的矩阵幂方法计算这些步长非常耗时，当我们到达任何节点或街道至少需要 29 或 27 步的点，这仍然是一个任意的截断。事实上，值得展示这种计算的速度有多快，注意在高达n=29的任何点上，我们都可以将步长矩阵作为计算可达性度量的基础。当然，当我们到达步长矩阵的单元为正的点时，我们将需要使用加权或其他路径长度的总数，如等式（8）所示。我们在图 8 中显示了这些轨迹。

![image-20221206143820778](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143820778.png)

为了了解这些如何产生更大的差异，我们转向我们最后一次探索原始问题和对偶问题中的可访问性，我们用概率术语来表述问题。我们之前定义为$\hat p= \hat p \hat P$和$\hat q=\hat q \hat Q$的稳态方程定义了步行者从系统中的任何位置开始移动的过程 - 在任何节点的原始和任何街道的对偶中，从节点到节点或从街道到街道的概率逐渐反映节点或街道的整体结构，初始概率逐渐消失，如果您愿意，可以扩散。在一个结构非常少的系统中（在某种程度上就是我们的例子）——这意味着我们需要对这些想法进行更好、更全面的测试——那么每个节点或街道处于稳定状态的概率可能非常相似。简而言之，这些马尔可夫过程洗掉了原来的概率，剩下的就是真实的结构。<span style="background-color: rgba(95, 178, 54, 0.5)">我们在前面的例子中说明了稳态和局部结构之间相当高的相关性，但这些都是非常简单的图，具有夸张的结构。如果一个人在街道网络方面有大片具有相似结构的大都市区，那么稳定状态可能比刚刚说明的可达性阶梯方法不太明显。</span>

<span style="background-color: rgba(95, 178, 54, 0.5)">我们在图 9(a) 和 (b) 中展示了基于$\hat p$和$\hat q$的节点和街道可达性模式</span>。因为节点结构非常平坦，我们对值进行了缩放，然后对它们进行了排名，如图 9(c) 所示，但这对锐化结构几乎没有作用。事实上，在图 9(b) 中，对于街道的可达性而言，该模式是完全平坦的，边缘节点以一种模糊的方式吸收了概率。值得正式比较这些模式，在图 10 中，我们将节点模式重新绘制为主题图，其中每个质心与每个区域相关联。这使得模式更容易直观地掌握。很明显，入度与相关性为 1 的概率稳态向量相同（图 10（a）与 10（c）相比）。入度和逆步长之间的**相关性**（10(a) cf 10(b)）是适度的，为 0.48，而入度和排序的概率稳态向量之间的相关性为 0.86。如果我们检查双街道模式，我们有类似的相关性，但我们没有对街道线进行排名。入度和反步长之间的最强相关性低至 0.34，而作为反步长的概率与概率和入度之间的相关性均为负但小于 0.25。正如我们上面所说的，这是由于我们使用的特定局部街道图上概率扩散的性质。

![image-20221206143837012](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143837012.png)

关于迄今为止制定的措施，我们的最后一个问题是提供一个部分测试，即我们能够将可访问性值与**与节点和街道相关的活动/旅行**进行匹配的情况下有多好。<span style="background-color: rgba(95, 178, 54, 0.5)">最简单的测试是查看节点可访问性值与观察到的与质心集相关的活动总数的接近程度。这些观察到的活动总数是起源就业和常驻工作人口</span>，它们由

![image-20221206143856553](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143856553.png)

在这个层面上进行比较是一个直接的问题，因为不清楚各种准入措施是否与解释就业或人口更相关。事实上，就业与人口之间存在-0.217的负相关关系，这与主要是单中心城市的空间结构非常一致，这些城市的人口密度低，而其中心及周边地区的就业密度高。还有一个问题。区域结构的组织使得每个区域的人口尽可能接近。虽然这没有像美国那样严格执行，每次选举后都会重新划分选区，但仍有动力确保每个选区的选举人口之间没有很大差异。这意味着像图 7(a) 中的反步长 $\Delta ^X$这样的测量值随着靠近中心而增加，并不能解释更加不均匀的人口空间结构。

![image-20221206143908569](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143908569.png)

因此，我们在这里对这些空间等式进行规范化的方法是将可访问性向量与我们计算为$E^{obs}_i / Area_i$和$P^{obs}_k /Area_i$的就业和人口密度进行比较，并使用这些与可访问性向量进行比较。这些密度之间的相关性仍然很低，在 0.055 时几乎没有相关性。然而，预测好于预期。事实上，我们只比较了 633 个区域的可达性和活动密度向量，而忽略了区域区域的 66 个外部边缘。逆步长与就业和人口之间的两个相关性都是正的，人口在 0.555 处高于就业在 0.371 处，如果我们将它们与入度 x 进行比较，这些相关性要低得多，没有显着性意义。来自稳态可达性$\hat p$的概率测量等价于入度。事实上，我们认为与反步长的相关性是显着的，当我们检查这些值的图时，很明显与就业存在正相关关系，具有非常典型的分散，几乎是超指数的。我们在图 11(a) 和 (b) 中展示了这些图。<span style="background-color: rgba(95, 178, 54, 0.5)">在某种程度上，令人惊讶的是，我们的测量与基于粗步长的潜在可达性测量的密度很好地相关，其基本数据的值范围为 1 到 29 是相对简单的指数。</span>

![image-20221206143922030](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143922030.png)

<span style="background-color: rgba(95, 178, 54, 0.5)">我们现在可以探讨在空间句法街道链接上观察到的运动问题。事实上，我们先验地知道，我们没有每个链接上的实际旅行移动，因为我们所拥有的只是起点和目的地之间的通用交互，实际上必须映射或分配给网络，然后才能在网络产生实际路径。因此，对特定网络链接上的起点-目的地旅行运动的任何分析都可能存在缺陷。</span>**对于系统中与交叉口 ik 之间的链接相关联的每条街道 j，我们可以从观察到的流量矩阵$T^{obs}_{ik}$比较该链接上关于起点和目的地之间流量的可达性，尽管事实上这些与实际流量相差甚远**。正如我们之前指出的那样，问题是我们拥有的观察值不是在任何链接 ik 上实际观察到的值，因为这些值结合了分配给相关链接的起点和目的地之间的许多行程。这些数据也只是 2001 年人口普查的 10% 样本。此外，**我们开发的实际网络结构是最近邻网络，它不包括高速公路和其他限制访问的主要道路等长连接。如果我们放宽链接的门槛，并调用与其他街道有两个以上交叉口的街道的概念，我们可能会改进比较，但这需要在更丰富、更详细的网络上进行测试和进一步开发。**就相关性而言，入度和反步长在 -0.073 和 -0.097 处与观察到的行程几乎没有任何相关性（注意入度和反步长在 0.342 处相关）。观察到的行程和概率访问测量之间的相关性实际上是非常轻微的负值，为 -0.064，但基本上没有相关性。**尽管这些结果有些令人失望，但就所使用的数据而言，它们是完全可以解释的，而且这些数据除了最近邻链接之外不包含任何东西来解释城市结构。在本文的下一部分和最后一部分中，我们将探索前进的方向。**

## 一个整合研究

空间句法和空间交互整合的关键已经通过对基本矩阵 A 的两个操作进行了定义，这两个操作产生了原始和对偶两个交互矩阵$U=AA^T $和$V=A^T A$。不同步长的距离虽然与$U^n$和$V^n$的关系为$U^n A^T = AY^n$，但必须进行归一化以进行解释。但是，如果我们将基本矩阵的对偶归一化作为行随机概率矩阵$G=[G_{ij}]$和$C=[C_{jk}]$来自等式 (19) 和 (20)，我们在下面重述为

![image-20221206143937833](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143937833.png)

然后概率矩阵的连续幂$\hat P=GC$和$\hat Q = CG$(给出非常明确的稳态关系$\hat pG=\hat q$和$\hat p=\hat qC$。然而，我们已经证明，这些稳定的状态关系洗去了我们需要保留的结构，而这些本想保留的结构是节点/质心和街道的相关可访问性的关键决定因素，因此我们从矩阵$\hat P$和$\hat Q$开始。

因此，一种更基本的方法是假设概率矩阵$\hat P$是我们前面在等式 (13) 中陈述的单约束行程方程的行列式，现在详细说明为

![image-20221206143951644](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206143951644.png)

**在不详细说明上述模型的密度版本的情况下，我们将用就业密度$E_i/Area_i$代替就业计数，并在以下应用程序中测试计数和密度**。**我们知道到目前为止本文示例中的$\hat P$矩阵非常稀疏，因为它是最近邻网络，但如果我们假设它足够丰富以检测城市结构，则空间交互模型直接来自等式（24）**。请注意，向量$e=[E_i]$ 和$\rho=[\rho_k]$不是稳态向量，而是起源和估计向量，<span style="background-color: rgba(95, 178, 54, 0.5)">我们可以在空间交互项中将其解释为就业和人口</span>。在矩阵术语中，我们将等式（24）中的模型写为

![image-20221206144007598](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206144007598.png)

这是原始空间交互，然后通过将矩阵 G 应用于该方程，我们生成对偶空间句法模型

![image-20221206144021722](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206144021722.png)

现在很明显 r 和 s 分别相当于人口和就业（计数或密度），但现在已传播到街道网络；也就是说，r 和 s 是人口和就业等价物，它们只是将这些与街道联系起来。这意味着人口和就业从地点分布到其相连的街道线。**因此，ρ 和 r 的预测彼此完全一致，并且可以从彼此推导出来，如等式 (27) 所示。**我们已经在我们的伦敦网络上测试了方程 (25) 到 (27)，基本上我们所做的是获取每个位置的就业，并使用方程 (25) 中的矩阵$\hat P$计算人口。我们对计数和密度就业都这样做，我们使用的数据如图 12 所示。

![image-20221206144256177](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206144256177.png)

图 12 中的相对集中度与**人口（及其密度）比就业人数和密度更分散的事实**是一致的。本质上，该模型所做的是以原始形式将图 12 上排的就业人数和密度转换为下排使用矩阵 P 的人口等值。我们在图 13 中展示了这些预测，其中我们绘制了计数和密度在上排，并通过排名在下排显示它们的形式，这减少了这些专题图的传播。很明显，就业人数和就业密度的转换使用了一个概率矩阵，该矩阵内部结构非常少—从原始平面图来看—它很难将就业转化为人口，计数和密度的结果都非常接近就业的原始分布。如果将图 12 中的就业地图与图 13 上排的人口进行比较，则两者之间的相关性非常高。预测和观察到的人口计数之间的相关性在 -0.150 为负，而对于密度，它为正但低至 0.119。在某种程度上，这反映了这项工作的主要结论：**在许多空间句法分析中，由于使用的平面图主要基于但不完全基于最近邻，因此该矩阵中没有足够的结构来确保我们得到好的对位置活动的预测，而这些预测又来自旅行运动。我们将回到这一点，因为这可能是该分析中最重要的发现，因为它反映了我们需要根据其他方法来考虑空间句法的概念，只有这样我们才能评估该方法的适用性。**

![image-20221206144317989](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206144317989.png)

事实上，即使从这个应用程序中也不会丢失所有内容，因为当我们对预测的人口数量和密度进行排名时，我们确实看到了一些结构。将观察到的人口密度与排名预测的人口密度（图 12 中的右下图与图 13 中的等价物）进行比较，我们看到更强的相关性，这表明矩阵$\hat P$中存在某种结构。我们还可以通过比较预测密度和观测密度的对数变换来解决此问题，如图 14 所示，该变换揭示了 0.507 处的更强显着相关性。毫无疑问，如果我们要生成一个更结构化的基本概率矩阵——也许$\hat P^2$、$\hat p^3$等——那么即使使用这个简单且有些武断的例子，我们也有可能得到更好的结果。我们要做的最后一件事是将原始空间交互模型转换为其对偶空间句法等价物。等式 (26) 和 (27) 表明，**将质心或节点处的就业和人口活动转换为沿系统链接（即街道）传播的活动是一件简单的事情**。这个人口实际上是$r=\rho G$而就业是$s=eG$。当然，如果我们估计这些与街道相关的活动，我们可以从使用 Q 预测街道上的就业分布开始，从 s预测 r，但没有以这种方式工作的传统。然而，开始收集街道上的活动并朝这个方向进行分析并不是不可能的。如果我们的街道是具有两个以上交叉口的较长路段，这会使分析更加复杂，但仍然可以想象通过这种方式可以深入了解城市结构。总而言之，我们在图 15 中显示了人口活动 r 和就业活动 s 的街道流动，无论是计数还是密度。很明显，就业在这些分布中占主导地位，并且由于基本概率矩阵非常稀疏且简单连接，因此分布到人口也反映了就业。如果我们对这些链接进行排名而不是使用绝对值，则有可能从这些模式中提取更多结构。但这只是我们可以继续进行的众多探索之一。然而，我们认为我们现在已经指明了方向，并且已经建立了许多未来研究的路线。我们以结论的方式转向这些。

![image-20221206144334111](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206144334111.png)

![image-20221206144343018](D:\a_extention\zotero_store\storage\YGDP3WE3\Space Syntax and Spatial Interaction.assets\image-20221206144343018.png)

## 总结：下一步工作

在空间交互模型中预测城市运动的关键问题涉及自变量，这些自变量表示位置大小的测量与产生运动的位置和吸引它的位置的成本或距离之间的权衡。所有这些信息都表示在概率矩阵$\hat P$中，我们以原始形式将其表述为质心/位置集合与它们所链接的街道或路线之间的相互作用，即使用矩阵$A=[A_{ij}]$.原始矩阵的维度被确定来代表节点之间所有可能的移动，其数量级为$N^2$，而这又基于街道链接或路段的数量 L，我们建议L比移动的总数小得多。这种街道结构在代表城市结构中所有细微差别和偏见方面的表现在很大程度上取决于这个数字。在包括外部区域在内的伦敦应用中，有N=699个节点，可能的出行次数为 488,601(=$N^2$)，而最近邻街道网络有大约 L=3,944,这意味着可能的链接数可能观察到的行程只有 0.008，而不是 1%。如果我们将可能的链接数量增加到$N^2$，那么我们需要考虑所有这些可能的街道之间的链接。事实上，最不可能所有可能的旅行将使用所有可能的链接，不同的旅行被分配给当地的街道段，以在起点和目的地之间制作最短路线。

我们用维度为$N^2$的原始矩阵和维度为$N^2$的对偶矩阵来表示问题的方式 , 涉及在大小方面的非平凡矩阵计算。如果我们有尽可能多的段的起点-终点相互作用，我们的对偶矩阵将是$N^4=N^2N^2$的数量级，在伦敦案例中ple 将是 488,601 x 488,601 的矩阵，包含大约 23,873,093,7201（230 亿）个单元。坦率地说，这样的矩阵完全超出了我们的处理能力。然而，每个街道段都不太可能相互关联，这就是这所暗示的，因此这个单元格的数量是理论上的上限。但它确实表明，使基本图的结构正确是绝对必要的，而且很明显，在这个应用程序中，我们的原始矩阵和对偶矩阵太稀疏了。这表明我们需要在空间句法中特别注意街道矩阵的性质；它还表明，如果我们要将其与空间交互联系起来，我们需要以更丰富的术语定义 A 矩阵，同时考虑到大小和连通性。

在整篇论文中，我们一直在努力说明基本平面图的配置，从其定义对偶和原始交互矩阵对于这两种方法的适当应用，特别是它们的集成至关重要。我们现在需要的是结构更丰富的更好示例，然​​后我们将能够评估我们的可访问性度量和上一节中提出的集成模型可以进一步发展的程度。我们还需要探索以区域和街道尺度表示的空间系统在多大程度上可以协调一致，这可能意味着我们需要考虑如何将出行运动分配给街道段。实际上，这可能是首先定义连接矩阵的一个很好的标准，但它还需要大量的进一步研究才能使这种分析取得成果。最后但并非最不重要的一点是，我们需要说一下我们在这里整合空间句法和空间交互是否取得了进展。**很明显，我们已经清楚地阐明了如何开发任何此类集成，但我们的应用程序令人失望，因为我们的示例不够丰富，无法显示涉及预测的良好结果。**这在我们使用的数据中得到了很好的反映，尤其是街道网络，但它使我们能够就我们如何定义空间句法中使用的网络发表一些非常重要的事情。为了将这些进展到它们对空间交互模型有用的程度，我们必须为基本网络的定义、它的拓扑结构和它的密度设计更清晰的规则，在这些规则上我们定义的各种可访问性将被测量。只有这样，我们才能将空间句法发展到与在预测中使用空间交互建模相一致的程度。

**References**

Bafna, S. (2003) Space Syntax: A Brief Introduction to Its Logic and Analytical Techniques, Environment and Behavior, 35, 1, 17-29. DOI: 10.1177/0013916502238863. Barthélemy, M. (2011) Spatial Networks, Physics Reports, 499, 1-101, also at arXiv: 1010.0302 [cond-mat.stat-mech]; DOI: 10.1016/j.physrep.2010.11.002. Batty, M. (2013) The New Science of Cities, The MIT Press, Cambridge, MA. Batty, M. (2016) Evolving a Plan: Design and Planning with Complexity, in J. Portugali and E. Stolk (Editors) Complexity, Cognition, Urban Planning and Design, Springer Proceedings in Complexity, Springer International, Zurich, Switzerland. Borgatti, S. P. and Everett, M. G. (1997) Network Analysis of 2-Mode Data, Social Networks, 19, 243-269. Hansen, W. G. (1959) How Accessibility Shapes Land Use, Journal of the American Institute of Planners, 25, 73-76. Hillier, B., and Hanson, J. (1985) The Social Logic of Space, Cambridge University Press, Cambridge, UK. Hillier, B. (1996) Space is the Machine, Cambridge University Press, Cambridge, UK. Hillier, B., Penn, A., Hanson, J., Grajewski, T., and Xu, J.(1993) Natural Movement: Or, Configuration and Attraction in Urban Pedestrian Movement, Environment and Planning B, 20, 29–66. Marshall, S. (2015) Line Structure Interpretation of Networks: Relationships, Matrices and Properties, Working Paper 204, CASA, University College London WC1E 7HB, UK Wilson, A. G. (1970) Entropy in Urban and Regional Modelling, Pion Press, London. 

**Acknowledgements**

The author thanks the Chinese University of Hong Kong for funding his appointment as VC Distinguished Visiting Professor during which this paper was written (January 2017). This research has also been supported by the EPSRC UK Regions Digital Research Facility (UK RDRF) Grant Number EP/M023583/1.